name: CI

on:
  push:
    branches: 
      - git-actions
jobs:
  build:

    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
      with:
        repository: opendistro-for-elasticsearch/opendistro-infra
        ref: master
        token: ${{ secrets.GitHub_PAT }}    
    - name: Run a multi-line script
      run: |
        docker run -p 9200:9200 -p 9600:9600 -e "discovery.type=single-node" opendistroforelasticsearch/elasticsearch-test-ubuntu:1.3.0
        
        curl -XGET --insecure https://localhost:9200 -u admin:admin
